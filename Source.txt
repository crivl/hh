-- Simple Local UI Library
local function CreateWindow(title)
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Parent = game.CoreGui
    ScreenGui.ResetOnSpawn = false

    local Frame = Instance.new("Frame")
    Frame.Parent = ScreenGui
    Frame.Size = UDim2.new(0, 300, 0, 200)
    Frame.Position = UDim2.new(0.5, -150, 0.5, -100)
    Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    Frame.BorderSizePixel = 0

    local Title = Instance.new("TextLabel")
    Title.Parent = Frame
    Title.Size = UDim2.new(1, 0, 0, 30)
    Title.Position = UDim2.new(0, 0, 0, 0)
    Title.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    Title.Text = title
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.TextScaled = true
    Title.Font = Enum.Font.GothamBold
    Title.BorderSizePixel = 0

    return Frame
end

-- Create the main window
local Window = CreateWindow("TerminalWare V1")

-- Configuration
getgenv().Rake = {
    Settings = {
        Prediction = 0.03,
        JumpOffSet = 0.06,
        AimPart = "Head",
        Misc = {
            AutoReload = true,
            AutoClicker = false,
            Whitelist = {
                UserWhitelist = false,
                HwidWhitelist = true
            },
            AdvancedMisc = {
                Desync = false,
                AutoShoot = false,
                AutoToxic = false
            }
        },
        AntiGroundShots = true,
        AntiAim = false, -- Added Anti-Aim toggle
        SilentAimKeybind = Enum.KeyCode.C, -- Default keybind for Silent Aim
        AntiAimKeybind = Enum.KeyCode.X, -- Default keybind for Anti-Aim
        CombinedKeybind = Enum.KeyCode.V, -- Default keybind for toggling both
        UseCombinedKeybind = false -- Toggle for using combined keybind
    }
}

-- Variables
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local Mouse = LocalPlayer:GetMouse()
local enabled = true

-- RGB Watermark
local function createWatermark()
    local watermark = Instance.new("ScreenGui")
    watermark.Name = "Watermark"
    watermark.Parent = game.CoreGui
    watermark.ResetOnSpawn = false

    local label = Instance.new("TextLabel")
    label.Parent = watermark
    label.Size = UDim2.new(0, 200, 0, 30)
    label.Position = UDim2.new(0.5, -100, 0.02, 0)
    label.BackgroundTransparency = 1
    label.Text = "Made by Criv"
    label.TextColor3 = Color3.new(1, 1, 1)
    label.TextScaled = true
    label.Font = Enum.Font.GothamBold
    label.TextStrokeTransparency = 0.5
    label.TextStrokeColor3 = Color3.new(0, 0, 0)

    -- RGB Color Cycle
    local hue = 0
    game:GetService("RunService").RenderStepped:Connect(function()
        hue = (hue + 0.01) % 1
        label.TextColor3 = Color3.fromHSV(hue, 1, 1)
    end)

    return watermark
end

-- Create the watermark
createWatermark()

-- Create the UI
local function CreateToggle(parent, name, defaultValue, callback)
    local ToggleFrame = Instance.new("Frame")
    ToggleFrame.Parent = parent
    ToggleFrame.Size = UDim2.new(1, -10, 0, 30)
    ToggleFrame.Position = UDim2.new(0, 5, 0, 40)
    ToggleFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    ToggleFrame.BorderSizePixel = 0

    local ToggleLabel = Instance.new("TextLabel")
    ToggleLabel.Parent = ToggleFrame
    ToggleLabel.Size = UDim2.new(0.7, 0, 1, 0)
    ToggleLabel.Position = UDim2.new(0, 5, 0, 0)
    ToggleLabel.Text = name
    ToggleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    ToggleLabel.TextScaled = true
    ToggleLabel.Font = Enum.Font.Gotham
    ToggleLabel.TextXAlignment = Enum.TextXAlignment.Left

    local ToggleButton = Instance.new("TextButton")
    ToggleButton.Parent = ToggleFrame
    ToggleButton.Size = UDim2.new(0.2, 0, 0.8, 0)
    ToggleButton.Position = UDim2.new(0.75, 0, 0.1, 0)
    ToggleButton.Text = defaultValue and "ON" or "OFF"
    ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    ToggleButton.BackgroundColor3 = defaultValue and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
    ToggleButton.Font = Enum.Font.GothamBold
    ToggleButton.TextScaled = true

    ToggleButton.MouseButton1Click:Connect(function()
        defaultValue = not defaultValue
        ToggleButton.Text = defaultValue and "ON" or "OFF"
        ToggleButton.BackgroundColor3 = defaultValue and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
        callback(defaultValue)
    end)

    return ToggleFrame
end

-- Silent Aim Toggle
CreateToggle(Window, "Enable Silent Aim", enabled, function(Value)
    enabled = Value
end)

-- Anti-Aim Toggle
CreateToggle(Window, "Enable Anti-Aim", getgenv().Rake.Settings.AntiAim, function(Value)
    getgenv().Rake.Settings.AntiAim = Value
end)

-- Combined Keybind Toggle
CreateToggle(Window, "Use Combined Keybind", getgenv().Rake.Settings.UseCombinedKeybind, function(Value)
    getgenv().Rake.Settings.UseCombinedKeybind = Value
end)
